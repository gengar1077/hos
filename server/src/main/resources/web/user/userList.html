<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>用户信息修改</title>
</head>
<body>
<h1>用户信息修改界面</h1>
    <form action="/user/update" method="post">
        <input type="hidden" name="uid" value="${user.uid}">
        <div id="error"></div>
        用户名：<input type="text"  value="${user.username}" name="username" ><br>
        密码：<input type="text" value="${user.password}" name="password"><br>
        手机号：<input type="text" value="${user.phone}" name="phone" id="phone"><br>
        状态：
        <select name="status" id="status">
            <option th:case="${session.user.getStatus()}=='0'">注销</option>
            <option th:case="${session.user.getStatus()}=='1'">正常</option>
        </select><br>
        <input value="保存" type="submit">
    </form>
<!--<script type="text/javascript" src="/static/jq/jquery-3.4.1.min.js"></script>-->
<!--<script>-->
<!--    $(function($){//在页面元素加载完成之后再执行-->
<!--        //给用户名输入框添加失去焦点事件-->
<!--        $("#tel").blur(function(){-->
<!--            //获取到value值-->
<!--            var tel = $(this).val();-->
<!--            var oldTel = '${user.tel}';//获取到原来用户名-->
<!--            re = /^1[3|4|5|8][0-9]\d{4,8}$/-->
<!--            if (tel==oldTel){-->
<!--                $("#error").empty();//清空错误信息-->
<!--                return;-->
<!--            }-->
<!--            if (!re.test(tel)){-->
<!--                $("#error").html("请填写正确的手机号格式！");-->
<!--            }-->

<!--            //发送ajax请求-->
<!--            $.ajax({-->
<!--                url:"/user/checkTel",//请求地址-->
<!--                type:"post",//请求方式-->
<!--                data:{"tel":tel},//要传输的数据-->
<!--                dataType:"json",//返回的数据格式-->
<!--                success:function(result){//成功回调函数，服务端成功返回之后会调用该方法-->
<!--                    //{code:1}-->
<!--                    if (result.code=="1"){-->
<!--                        $("#error").html("手机号已经被占用，请重新输入！");//在错误信息栏显示错误-->
<!--                    }else if (result.code=="2"){-->
<!--                        $("#error").html("手机号不能为空!")-->
<!--                    }else {-->
<!--                        $("#error").empty();//清空错误信息-->
<!--                    }-->
<!--                }-->
<!--            })-->
<!--        })-->
<!--        //表单提交事件-->
<!--        $("form").submit(function(){-->
<!--            var html = $("#error").html();-->
<!--            //如果有错误信息则不提交表单-->
<!--            if (html!=null && html!=""){-->
<!--                return false;//阻止表单提交-->
<!--            }-->
<!--            return true;-->
<!--        })-->
<!--    })-->
<!--</script>-->
</body>
</html>